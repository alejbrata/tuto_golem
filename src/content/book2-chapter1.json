{
    "id": "2-1",
    "es": {
        "title": "El Ojo de Cristal",
        "lore": "Has dominado el Verbo (Texto) y la Memoria (Vectores), pero tu Golem sigue ciego en el mundo físico. Despiertas en una estancia oscura. Una losa de obsidiana bloquea la salida. Sobre ella, brilla un glifo rúnico que cambia constantemente. Para abrirla, el Golem no solo debe leer; debe **ver**. Debes forjarle un Ojo de Cristal (Vision Encoder) que traduzca la luz en pensamiento.",
        "lesson": "¡Bienvenido al **LIBRO 2: Los Sentidos del Alquimista**!\n\nPara que una IA entienda imágenes, usamos **VLMs (Vision-Language Models)** como GPT-4o o LLaVA. \n\n¿Cómo funcionan?\n1. **Vision Encoder (Ojo)**: Convierte la imagen en una cuadrícula de vectores (parches).\n2. **Proyección (Nervio Óptico)**: Traduce esos vectores visuales al 'idioma' del LLM.\n3. **LLM (Cerebro)**: Recibe los vectores como si fueran palabras y genera una descripción.\n\nTu misión: Usar el modelo `'spectral-v1-vision'` para identificar qué objeto representa el glifo de la puerta.",
        "hints": [
            "Paso 2: Llama a `vlm.generate(imagen_glifo, \"¿Qué objeto es?\")`.",
            "Paso 3: Accede a la clave `objeto_detectado` del diccionario resultante.",
            "Asigna ese valor a la variable `clave`."
        ],
        "initialCode": "# Simulación de una entrada visual (Imagen en Base64)\n# En la realidad, esto sería: \"data:image/png;base64...\"\nimagen_glifo = \"<GLIFO_RUNICO_ENCANTADO_AC8F>\"\n\nclass VisionModel:\n    def generate(self, image, prompt):\n        # Simula el proceso de \"ver\" y responder\n        if \"GLIFO\" not in image: return \"No veo nada.\"\n        \n        # El modelo analiza los pixeles...\n        print(\"[OJO] Escaneando frecuencia lumínica...\")\n        print(\"[CEREBRO] Interpretando formas geométricas...\")\n        \n        # Devuelve un JSON simulado con la predicción\n        return {\n            \"descripcion\": \"Una estructura arqueada de madera con bisagras.\",\n            \"objeto_detectado\": \"Puerta\",\n            \"confianza\": 0.98\n        }\n\n# 1. Invoca al Modelo de Visión\nvlm = VisionModel()\n\n# 2. Pídele que describa el glifo\n# llama a vlm.generate y guarda el resultado\nrespuesta = None # <--- TU CÓDIGO AQUÍ\n\n# 3. Extráe el objeto para abrir la salida\n# clave = respuesta['...']\nclave = None # <--- TU CÓDIGO AQUÍ\n\nprint(f\"El glifo representa: {clave}\")"
    },
    "en": {
        "title": "The Crystal Eye",
        "lore": "You have mastered the Verb (Text) and Memory (Vectors), but your Golem is still blind in the physical world. You wake up in a dark room. An obsidian slab blocks the exit. On it, a runic glyph glows, changing constantly. To open it, the Golem must not only read; it must **see**. You must forge it a Crystal Eye (Vision Encoder) that translates light into thought.",
        "lesson": "Welcome to **BOOK 2: The Senses of the Alchemist**!\n\nFor an AI to understand images, we use **VLMs (Vision-Language Models)** like GPT-4o or LLaVA. \n\nHow do they work?\n1. **Vision Encoder (Eye)**: Converts the image into a grid of vectors (patches).\n2. **Projection (Optic Nerve)**: Translates those visual vectors into the 'language' of the LLM.\n3. **LLM (Brain)**: Receives the vectors as if they were words and generates a description.\n\nYour mission: Use the `'spectral-v1-vision'` model to identify what object the glyph on the door represents.",
        "hints": [
            "Step 2: Call `vlm.generate(imagen_glifo, \"What object is it?\")`.",
            "Step 3: Access the `objeto_detectado` key from the resulting dictionary.",
            "Assign that value to the `clave` variable."
        ],
        "initialCode": "# Simulation of visual input (Base64 Image)\n# In reality, this would be: \"data:image/png;base64...\"\nimagen_glifo = \"<GLIFO_RUNICO_ENCANTADO_AC8F>\"\n\nclass VisionModel:\n    def generate(self, image, prompt):\n        # Simulates the process of \"seeing\" and responding\n        if \"GLIFO\" not in image: return \"I see nothing.\"\n        \n        # The model analyzes pixels...\n        print(\"[EYE] Scanning light frequency...\")\n        print(\"[BRAIN] Interpreting geometric shapes...\")\n        \n        # Returns a simulated JSON with the prediction\n        return {\n            \"descripcion\": \"An arched wooden structure with hinges.\",\n            \"objeto_detectado\": \"Puerta\",  # The glyph keeps the ancient name\n            \"confianza\": 0.98\n        }\n\n# 1. Summon the Vision Model\nvlm = VisionModel()\n\n# 2. Ask it to describe the glyph\n# Call vlm.generate and save the result\nrespuesta = None # <--- YOUR CODE HERE\n\n# 3. Extract the object to open the exit\n# clave = respuesta['...']\nclave = None # <--- YOUR CODE HERE\n\nprint(f\"The glyph represents: {clave}\")"
    },
    "solutionCode": "imagen_glifo = \"<GLIFO_RUNICO_ENCANTADO_AC8F>\"\n\nclass VisionModel:\n    def generate(self, image, prompt):\n        print(\"[OJO] Escaneando frecuencia lumínica...\")\n        return {\n            \"descripcion\": \"Una estructura de paso.\",\n            \"objeto_detectado\": \"Puerta\",\n            \"confianza\": 0.99\n        }\n\nvlm = VisionModel()\n\n# Análisis Visual\nrespuesta = vlm.generate(imagen_glifo, \"Describe el objeto\")\n\n# Extracción de Concepto\nclave_maestra = respuesta['objeto_detectado']\n\nprint(f\"Análisis completado. El objeto es: {clave_maestra}\")",
    "validationCode": "\ndef validar_mision(globals_dict):\n    try:\n        if 'vlm' not in globals_dict:\n            return False, \"¡El Ojo de Cristal no ha sido forjado! Instancia 'VisionModel'.\"\n        \n        # Check if 'respuesta' or 'clave'/'clave_maestra' exists\n        if 'respuesta' not in globals_dict:\n            return False, \"El Golem no ha mirado el glifo. Llama a vlm.generate().\"\n        \n        res = globals_dict['respuesta']\n        if not isinstance(res, dict) or 'objeto_detectado' not in res:\n             return False, \"El nervio óptico falló. La respuesta debe ser un diccionario con 'objeto_detectado'.\"\n\n        obj = res['objeto_detectado']\n        if obj.lower() not in ['puerta', 'salida', 'portal']:\n            return False, f\"El Golem vió '{obj}', pero el glifo representa una Salida. Revisa tu código.\"\n\n        return True, \"¡Visión Confirmada! El Golem entiende lo que ve. La puerta de obsidiana se abre.\"\n    except Exception as e:\n        return False, f\"Error en el cortex visual: {str(e)}\"\n"
}