{
    "id": "1-3",
    "es": {
        "title": "La Biblioteca de los Susurros",
        "lore": "El Golem percibe el significado, pero ahora enfrenta el caos. La Biblioteca de los Susurros contiene mil reliquias olvidadas. Necesitas encontrar la 'Llave del Amanecer', pero no sabes su forma ni su etiqueta. Solo sabes su *esencia*. Debes enseñar al Golem a escanear la memoria de la biblioteca y resonar con el objeto que busca, no por su nombre, sino por su vibración matemática.",
        "lesson": "Ya sabes calcular similitud entre dos vectores. Ahora aplicaremos esto a **Búsqueda Semántica**.\n\nEn una base de datos vectorial, no buscamos 'coincidencia exacta' (Ctrl+F). Buscamos a los 'vecinos más cercanos' (Nearest Neighbors).\n\nTu algoritmo debe:\n1. Recorrer la base de datos (una lista de vectores).\n2. Calcular la similitud (Producto Escalar) contra tu vector de búsqueda (`query`).\n3. Si la similitud supera un **umbral (0.9)**, has encontrado el objeto.",
        "hints": [
            "Usa un bucle `for id, vec in base_datos.items():` para recorrer la librería.",
            "Dentro del bucle, calcula el producto escalar entre `query` y `vec`.",
            "Recuerda la fórmula: `(q[0]*v[0]) + (q[1]*v[1]) + (q[2]*v[2])`.",
            "Si `similitud > 0.9`, retorna el `id` hallado."
        ],
        "initialCode": "# Base de datos: Diccionario {ID_Objeto: Vector}\n# Imagina miles de objetos, simplificados aquí:\nmemoria_biblioteca = {\n    \"item_304\": [0.1, 0.2, 0.9], # Una espada oxidada\n    \"item_777\": [0.8, 0.9, 0.1], # ¿La llave antigua?\n    \"item_055\": [0.2, 0.1, 0.3]  # Una piedra común\n}\n\n# La esencia mental de lo que buscas ('Algo que abre puertas')\nvector_busqueda = [0.9, 0.8, 0.2]\n\ndef buscar_reliquia(query, base_datos):\n    # 1. Itera sobre items y sus vectores en base_datos\n    for id_obj, vector in base_datos.items():\n        pass \n        # <--- TU ALQUIMIA AQUÍ\n        # 2. Calcula producto escalar (similitud)\n        # 3. Si similitud > 0.9, devuelve el id_obj\n    \n    return \"No encontrado\"\n\n# Invocación\nhallazgo = buscar_reliquia(vector_busqueda, memoria_biblioteca)\nprint(f\"El Golem ha recuperado: {hallazgo}\")"
    },
    "en": {
        "title": "The Whispering Library",
        "lore": "The Golem perceives meaning, but now faces chaos. The Whispering Library contains a thousand forgotten relics. You need to find the 'Key of Dawn', but you don't know its shape or label. You only know its *essence*. You must teach the Golem to scan the library's memory and resonate with the object it seeks, not by its name, but by its mathematical vibration.",
        "lesson": "You already know how to calculate similarity between two vectors. Now we will apply this to **Semantic Search**.\n\nIn a vector database, we don't look for 'exact match' (Ctrl+F). We look for the 'nearest neighbors'.\n\nYour algorithm must:\n1. Iterate through the database (a list of vectors).\n2. Calculate similarity (Dot Product) against your search vector (`query`).\n3. If the similarity exceeds a **threshold (0.9)**, you have found the object.",
        "hints": [
            "Use a loop `for id, vec in base_datos.items():` to scan the library.",
            "Inside the loop, calculate the dot product between `query` and `vec`.",
            "Remember the formula: `(q[0]*v[0]) + (q[1]*v[1]) + (q[2]*v[2])`.",
            "If `similarity > 0.9`, return the found `id`."
        ],
        "initialCode": "# Database: Dictionary {Object_ID: Vector}\n# Imagine thousands of objects, simplified here:\nmemoria_biblioteca = {\n    \"item_304\": [0.1, 0.2, 0.9], # A rusty sword\n    \"item_777\": [0.8, 0.9, 0.1], # The ancient key?\n    \"item_055\": [0.2, 0.1, 0.3]  # A common stone\n}\n\n# The mental essence of what you seek ('Something that opens doors')\nvector_busqueda = [0.9, 0.8, 0.2]\n\ndef buscar_reliquia(query, base_datos):\n    # 1. Iterate over items and their vectors in base_datos\n    for id_obj, vector in base_datos.items():\n        pass \n        # <--- YOUR ALCHEMY HERE\n        # 2. Calculate scalar product (similarity)\n        # 3. If similarity > 0.9, return id_obj\n    \n    return \"Not found\"\n\n# Invocation\nhallazgo = buscar_reliquia(vector_busqueda, memoria_biblioteca)\nprint(f\"The Golem has retrieved: {hallazgo}\")"
    },
    "solutionCode": "memoria_biblioteca = {\n    \"item_304\": [0.1, 0.2, 0.9],\n    \"item_777\": [0.8, 0.9, 0.1],\n    \"item_055\": [0.2, 0.1, 0.3]\n}\n\nvector_busqueda = [0.9, 0.8, 0.2]\n\ndef buscar_reliquia(query, base_datos):\n    for id_obj, vector in base_datos.items():\n        # Producto Escalar simplificado (3 dimensiones)\n        similitud = (query[0]*vector[0]) + (query[1]*vector[1]) + (query[2]*vector[2])\n        \n        if similitud > 0.9:\n            return id_obj\n    \n    return \"No encontrado\"\n\nhallazgo = buscar_reliquia(vector_busqueda, memoria_biblioteca)\nprint(f\"El Golem ha recuperado: {hallazgo}\")",
    "validationCode": "\ndef validar_mision(globals_dict):\n    try:\n        if 'buscar_reliquia' not in globals_dict:\n            return False, \"¡El escáner no funciona! Define la función 'buscar_reliquia'.\"\n        \n        buscar = globals_dict['buscar_reliquia']\n        \n        # Datos de prueba secretos\n        db_secreta = {\n            \"basura\": [0.0, 0.0, 0.1],\n            \"tesoro_real\": [1.0, 1.0, 1.0],\n            \"trampa\": [0.5, 0.5, 0.5]\n        }\n        query_test = [0.9, 0.9, 0.9]\n        \n        # Test 1: Debe encontrar 'tesoro_real' (similitud alta)\n        res = buscar(query_test, db_secreta)\n        if res != \"tesoro_real\":\n            return False, f\"Tu escáner falló en una prueba oculta. Buscábamos 'tesoro_real' y devolvió '{res}'.\"\n            \n        # Test 2: Umbral\n        # Vector ortogonal no debe encontrar nada\n        if buscar([1,0,0], {\"orto\": [0,1,0]}) != \"No encontrado\":\n             return False, \"El escáner es demasiado sensible. No debería encontrar coincidencias bajas.\"\n\n        return True, \"¡El Tercer Ojo se abre! El Golem ha localizado la Llave Antigua en el caos.\"\n    except Exception as e:\n        return False, f\"Error en la búsqueda: {str(e)}\"\n"
}