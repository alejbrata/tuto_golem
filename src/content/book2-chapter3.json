{
    "id": "2-3",
    "title": "Visiones en Movimiento",
    "lore": "Has llegado al final de tu iniciación sensorial. Ante ti flota una 'Piedra de Memoria', un cristal que proyecta una escena del pasado en bucle. En ella, el Guardián de la Torre esconde un tesoro, pero la proyección es efímera y rápida. Tu Golem debe aprender a percibir el tiempo, a congelar el flujo de imágenes y encontrar el instante exacto en que la 'llave' es revelada.",
    "lesson": "El vídeo es la dimensión final: Espacio (Imágenes) + Tiempo.\n\nPara que la IA procese vídeo (Video RAG), no vemos cada milisegundo. Usamos **Sampling**: extraemos un frame cada X segundos y lo describimos.\n\n1. **Extracción**: Frame a `t=0s`, `t=1s`, `t=2s`...\n2. **Indexación**: Cada frame se convierte en texto/vector.\n3. **Búsqueda Temporal**: Buscamos conceptos (\"llave\") y obtenemos su `timestamp`.\n\nTu misión: Iterar sobre el flujo de memoria y detener el tiempo cuando aparezca la 'llave'.",
    "initialCode": "# Flujo de video procesado (Simulación de Gemini 1.5 Pro / GPT-4o)\n# Una lista de diccionarios con 'segundo' y 'descripcion'\nvideo_stream = [\n    {'t': 0.0, 'desc': 'Un salón de piedra vacío.'},\n    {'t': 2.5, 'desc': 'Entra una figura encapuchada.'},\n    {'t': 5.0, 'desc': 'La figura mira a los lados con nerviosismo.'},\n    {'t': 7.5, 'desc': 'Saca un objeto brillante de su túnica.'},\n    {'t': 10.0, 'desc': 'Sostiene unas monedas de oro.'},\n    {'t': 12.5, 'desc': 'Deja caer una llave antigua al suelo.'},\n    {'t': 15.0, 'desc': 'La figura se desvanece en las sombras.'}\n]\n\n# Tu misión: Encontrar el 't' (tiempo) de la 'llave'\nmomento_clave = -1\n\n# <--- TU CÓDIGO: Bucle for para buscar 'llave' en las descripciones\n# for frame in video_stream:\n#     if ...\n\n# print(f\"Evento detectado en el segundo: {momento_clave}\")",
    "hints": [
        "Itera usando `for frame in video_stream:`.",
        "Comprueba si `'llave' in frame['desc']`.",
        "Si la encuentras, guarda `frame['t']` en `momento_clave` y usa `break` para detener la búsqueda."
    ],
    "solutionCode": "video_stream = [\n    {'t': 0.0, 'desc': 'Un salón de piedra vacío.'},\n    {'t': 2.5, 'desc': 'Entra una figura encapuchada.'},\n    {'t': 5.0, 'desc': 'La figura mira a los lados con nerviosismo.'},\n    {'t': 7.5, 'desc': 'Saca un objeto brillante de su túnica.'},\n    {'t': 10.0, 'desc': 'Sostiene unas monedas de oro.'},\n    {'t': 12.5, 'desc': 'Deja caer una llave antigua al suelo.'},\n    {'t': 15.0, 'desc': 'La figura se desvanece en las sombras.'}\n]\n\nmomento_clave = -1\n\nfor frame in video_stream:\n    print(f\"[{frame['t']}s] Analizando: {frame['desc']}...\")\n    if 'llave' in frame['desc']:\n        momento_clave = frame['t']\n        print(\"¡OBJETIVO LOCALIZADO!\")\n        break\n\nprint(f\"La llave cae exactamente en el segundo: {momento_clave}\")",
    "validationCode": "\ndef validar_mision(globals_dict):\n    try:\n        if 'momento_clave' not in globals_dict:\n            return False, \"No has definido la variable 'momento_clave'.\"\n        \n        t = globals_dict['momento_clave']\n        \n        if t == -1:\n            return False, \"El valor sigue siendo -1. Tu bucle no encontró nada.\"\n            \n        if t != 12.5:\n            return False, f\"Detuviste el tiempo en {t}s, pero ese no es el momento correcto. Busca 'llave'.\"\n\n        return True, \"¡Sincronización Temporal Perfecta! Has recuperado la llave y completado el Libro de los Sentidos.\"\n    except Exception as e:\n        return False, f\"Error temporal: {str(e)}\"\n"
}